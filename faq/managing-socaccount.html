<!--#set var="title" value="Frequently Asked Questions" -->
<!--#include virtual="../inc/header.html" -->
<h2>Frequently Asked Questions: Managing Shared Accounts</h2>

<h3 id="chgrp">Some files in our society space are owned by an ex-admin
and can't be modified... help!</h3>

<p>We often get asked it we can resolve this by changing the files'
owner to be one of the current admins. For various reasons we prefer not
to do this, but are happy to enable modification by changing the "group
writable" flag on the files. Just ask the sysadmins and we'll get it
done.</p>

<p>If you want to make your files group-writable yourself, the
appropriate command is <tt>chmod g+rw &lt;filenames&gt;</tt>. A variant
like <tt>chmod -R g+rw *</tt>, executed from the base of the society
home directory, will recursively make all your files group-readable and
writable. If the files' group is not the same as the society, <tt>chgrp
&lt;groupname&gt; &lt;filenames&gt;</tt> will do the trick.</p>

<h3 id="successor">How do I hand access to my shared account to my
successor?</h3>

<p>Make sure that the new person has a personal account on the machine.
Once this has been set up, you can add the new person to the society
account via the <a href="https://control.srcf.net">Control Panel</a>.</p>

<p>During the handover period you should make sure that all file
permissions are updated appropriately. Specifically:</p>

<ul>
<li>All files and directories should be owned by the society group</li>
<li>All files and directories should be group-readable and group-writable (<tt>chmod g+rw</tt>)</li>
<li>All directories should be set-group-ID (<tt>chmod g+s</tt>)</li>
</ul>

<p>The script <tt>srcf-soc-badperms $society</tt> can be used to list files
with suspected bad permissions.  The script <tt>srcf-soc-permfix $society</tt>
will fix the permissions for any files or directories owned by you.</p>

<h3 id="crontab">How do I set up a society crontab?</h3>

<p>Just run:</p>

<pre>
sudo -u <i>socuser</i> crontab -e
</pre>

where <i>socuser</i> is the name of the society account that you are an admin of.
This should open the society crontab in your default editor (typically <tt>nano</tt>, ^o to save, ^x to exit).

<h3 id="daemonsetc">How do I launch Django or other long running processes?</h3>

<p>You can now run long running server processes (e.g. Django, other web frameworks). Preface the command with:</p>

<pre>
sudo -u <i>socuser</i> 
</pre>
where <i>socuser</i> is the name of the society account that you are an admin of.
Note that web servers must be run on <tt>webserver.srcf.net</tt>, not <tt>shell.srcf.net</tt>, and proxied to from Apache.

<h3 id="wordpressupdate">How do I make WordPress update itself?</h3>

<p>WordPress includes an update utility, but this can be quite tedious about not correctly detecting that it can update itself; it may fail without even trying, especially on society accounts.</p>
<p>To make this work you can add the following few lines to your configuration
(wp-config.php) near the bottom, but above the line that says "stop editing":</p>
<p><b>It is very important that you ensure that the permissions
on files in your society directory are writable by the society group</b> (and therefore the user
that Wordpress will run as).<br />
Wordpress will not check in advance: if some of your files are writable and some are not, you
will end up with a half-upgraded Wordpress - also known as "completely broken". This <i>should</i>
be the case by default, but some SFTP clients may override it. The procedure to set this up
manually is the same as for <a href="#successor">granting access to a successor</a>. </p>
<pre>
/**
 * Force wordpress to use direct filesystem access so that upgrades work
 * properly. See: http://core.trac.wordpress.org/ticket/10205
 * http://codex.wordpress.org/Editing_wp-config.php
 */
define('FS_METHOD', 'direct');
define('FS_CHMOD_DIR', (02775 &amp; ~ umask()));
define('FS_CHMOD_FILE', (0664 &amp; ~ umask()));
</pre>
<p>This workaround is experimental; please <a href="mailto:soc-srcf-admin@lists.cam.ac.uk">let us
know</a> if it does not work for you.</p>

<!--#include virtual="../inc/footer.html" -->
